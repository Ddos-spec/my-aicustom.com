---
import type { BlogPostMeta } from '../../data/blogPosts';
import { allCategories } from '../../data/blogPosts';
import CategoryPill from './CategoryPill.astro';

interface Props {
  latestPosts: BlogPostMeta[];
}

const { latestPosts } = Astro.props;
const contactHref = '/contact/';
const toPostHref = (slug: string) => `/blog/${slug}/`;
---
<!-- Article Sidebar Component -->
<aside class="space-y-10 lg:space-y-12">
  <div class="rounded-3xl border border-slate-100 bg-white p-8 shadow-[0_18px_50px_-32px_rgba(15,23,42,0.4)] dark:border-slate-800/80 dark:bg-slate-900">
    <h3 class="text-lg font-semibold text-slate-900 dark:text-white">Artikel Terbaru</h3>
    <ul class="mt-6 space-y-6">
      {latestPosts.map((post) => (
        <li class="border-b border-slate-100 pb-5 last:border-b-0 last:pb-0 dark:border-slate-800/80">
          <a href={toPostHref(post.slug)} class="group grid grid-cols-[4.5rem_1fr] gap-4">
            <img
              src={post.thumbnailImage}
              alt={post.title}
              loading="lazy"
              class="h-20 w-full rounded-2xl object-cover transition-transform duration-300 group-hover:scale-105"
            />
            <div class="flex flex-col justify-between">
              <p class="text-xs font-semibold uppercase tracking-widest text-slate-500">{post.readTime}</p>
              <p class="text-sm font-semibold leading-snug text-slate-900 transition-colors duration-300 group-hover:text-sky-600 dark:text-white">
                {post.title}
              </p>
            </div>
          </a>
        </li>
      ))}
    </ul>
  </div>

  <div class="rounded-3xl border border-slate-100 bg-white p-8 shadow-[0_18px_50px_-32px_rgba(15,23,42,0.4)] dark:border-slate-800/80 dark:bg-slate-900">
    <h3 class="text-lg font-semibold text-slate-900 dark:text-white">Kategori</h3>
    <div class="mt-6 flex flex-wrap gap-3">
      {allCategories.map((category) => (
        <CategoryPill label={category.label} variant={category.key} size="sm" className="text-xs" />
      ))}
    </div>
  </div>

  <div class="rounded-3xl border border-slate-900 bg-slate-900 p-8 text-white shadow-[0_28px_90px_-45px_rgba(8,47,73,0.9)]">
    <p class="text-sm font-semibold uppercase tracking-[0.35em] text-sky-400">Konsultasi Gratis</p>
    <h3 class="mt-4 text-2xl font-semibold leading-snug">Butuh blueprint khusus untuk tim Anda?</h3>
    <p class="mt-4 text-sm text-slate-200">
      Jadwalkan sesi 30 menit dengan konsultan kami untuk memetakan prioritas AI yang paling berdampak.
    </p>
    <a
      href={contactHref}
      class="mt-6 inline-flex w-full items-center justify-center gap-2 rounded-full bg-white px-5 py-3 text-sm font-semibold uppercase tracking-widest text-slate-900 transition-colors duration-300 hover:bg-sky-100"
    >
      Jadwalkan sesi
      <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14m-7-7 7 7-7 7"></path>
      </svg>
    </a>
  </div>
</aside>
